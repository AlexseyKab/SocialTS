(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{22:function(e,t,n){e.exports={dialogs:"Dialogs_dialogs__aWGc7",dialogsItem:"Dialogs_dialogsItem__2C64W",dialog:"Dialogs_dialog__2SMSH",active:"Dialogs_active__2X8bm",messages:"Dialogs_messages__1ApwO",message:"Dialogs_message__CoR4d"}},23:function(e,t,n){e.exports={dialogs:"DialogsItem_dialogs__pT4z6",dialogsItem:"DialogsItem_dialogsItem__2aiWJ",dialog:"DialogsItem_dialog__18Wbv",active:"DialogsItem_active__2Xg_Y"}},29:function(e,t,n){e.exports={photo:"user_photo__2D30i",selectPage:"user_selectPage__QxaI1"}},30:function(e,t,n){e.exports={descriptionBlock:"ProfileInfo_descriptionBlock__3pp0s",content:"ProfileInfo_content__3WTdB"}},31:function(e,t,n){e.exports={description:"MyPosts_description__1Jci8",posts:"MyPosts_posts__o6qY_"}},32:function(e,t,n){e.exports={header:"Header_header__19HPs",loginBlock:"Header_loginBlock__3eJy1"}},42:function(e,t,n){e.exports={messages:"MessageProps_messages__jvlcp",message:"MessageProps_message__1symC"}},45:function(e,t,n){e.exports={item:"Post_item__il7ql"}},49:function(e,t,n){},7:function(e,t,n){e.exports={nav:"Navbar_nav__kppyN",item:"Navbar_item__Oh2EQ",active:"Navbar_active__2iIrX"}},78:function(e,t,n){"use strict";n.r(t),n.d(t,"rerenderEntireTree",(function(){return ye}));var s=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,s=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),s(e),a(e),c(e),i(e)}))},a=n(1),c=n.n(a),i=(n(49),n(4)),r=n(7),o=n.n(r),u=n(0),l=function(){return Object(u.jsxs)("nav",{className:o.a.nav,children:[Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/profile",activeClassName:o.a.active,children:"Profile"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/messages",activeClassName:o.a.active,children:"Messages"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/users",activeClassName:o.a.active,children:"Users"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/news",activeClassName:o.a.active,children:"News"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/music",activeClassName:o.a.active,children:"Music"})}),Object(u.jsx)("div",{className:o.a.item,children:Object(u.jsx)(i.b,{to:"/settings",activeClassName:o.a.active,children:"Settings"})})]})},j=n(3),d=function(){return Object(u.jsx)("div",{children:"Music"})},g=function(){return Object(u.jsx)("div",{children:"Settings"})},b=function(){return Object(u.jsx)("div",{children:"News"})},p=n(22),h=n.n(p),O=n(23),f=n.n(O),m=function(e){return Object(u.jsx)("div",{className:f.a.dialog+" "+f.a.active,children:Object(u.jsx)(i.b,{to:"/messages/"+e.id,activeClassName:f.a.active,children:e.name})})},x=n(42),v=n.n(x),_=function(e){return Object(u.jsx)("div",{className:v.a.messages,children:e.message})},P=function(e){var t=e.dialogs.map((function(e){return Object(u.jsx)(m,{name:e.name,id:e.id})})),n=e.messages.map((function(e){return Object(u.jsx)(_,{message:e.message})}));return e.isAuth?Object(u.jsxs)("div",{className:h.a.dialogs,children:[Object(u.jsx)("div",{className:h.a.dialogsItem,children:t}),Object(u.jsxs)("div",{className:h.a.messages,children:[Object(u.jsx)("div",{children:n}),Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{value:e.newMessageBody,onChange:function(t){e.onNewMessageChange(t.currentTarget.value)},placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442"})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){e.onSendMessageClick(e.newMessageBody)},children:"Send"})})]})]})]}):Object(u.jsx)(j.a,{to:"/login"})},T=n(10),w=n(2),C=n(44),S=n.n(C).a.create({baseURL:"https://social-network.samuraijs.com/api/1.0/",withCredentials:!0,headers:{"API-KEY":"d7fc70fd-6aec-456b-80d7-34c2364c0cf6"}}),E=function(e,t){return S.get("users?page=".concat(e,"&count=").concat(t)).then((function(e){return e.data}))},N=function(){return S.get("auth/me").then((function(e){return e.data}))},y=function(e){return S.delete("follow/".concat(e)).then((function(e){return e.data}))},k=function(e){return S.post("follow/".concat(e),{}).then((function(e){return e.data}))},A=function(e){return S.get("profile/"+e).then((function(e){return e.data}))},D={postData:[{id:1,message:"Hi, how are you?",value:10},{id:2,message:"It's my first post",value:8},{id:3,message:"Yo it-incubator",value:10},{id:4,message:"Yo",value:17}],newPostText:"",profile:null},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD-POST":var n={id:5,message:e.newPostText,value:0};return Object(w.a)(Object(w.a)({},e),{},{postData:e.postData.concat(n),newPostText:""});case"UPDATE-NEW-POST-TEXT":return Object(w.a)(Object(w.a)({},e),{},{newPostText:t.newPostText});case"SET_USERS_PROFILE":return Object(w.a)(Object(w.a)({},e),{},{profile:t.profile});default:return e}},M={dialogs:[{id:1,name:"Alex"},{id:2,name:"Olga"},{id:3,name:"Dima"},{id:4,name:"Sveta"}],messages:[{id:1,message:"Hi"},{id:2,message:"How are you"},{id:3,message:"It-incubator"},{id:4,message:"it-kamasutra"}],newMessageBody:""},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return"UPDATE-NEW-MESSAGE-BODY"===t.type?Object(w.a)(Object(w.a)({},e),{},{newMessageBody:t.body}):"SEND-MESSAGE"===t.type?Object(w.a)(Object(w.a)({},e),{},{messages:e.messages.concat({id:5,message:e.newMessageBody}),newMessageBody:""}):e},F=Object(T.b)((function(e){return{newMessageBody:e.dialogsPage.newMessageBody,messages:e.dialogsPage.messages,dialogs:e.dialogsPage.dialogs,isAuth:e.auth.isAuth}}),(function(e){return{onNewMessageChange:function(t){e({type:"UPDATE-NEW-MESSAGE-BODY",body:t})},onSendMessageClick:function(t){e({type:"SEND-MESSAGE",value:t})}}}))(P),L=n(14),B=n(15),G=n(17),R=n(16),W=n(47),z={users:[],pageSize:5,totalUsersCount:20,currentPage:1,isFetching:!0,following:[]},H=function(e,t){return{type:"TOGGLE_IS_FOLLOWED",isFetching:e,userId:t}},J=function(e){return{type:"TOGGLE_IS_FETCHING",isFetching:e}},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)(Object(w.a)({},e),{},{followed:!0}):e}))});case"UNFOLLOW":return Object(w.a)(Object(w.a)({},e),{},{users:e.users.map((function(e){return e.id===t.userId?Object(w.a)(Object(w.a)({},e),{},{followed:!1}):e}))});case"SET_USERS":return Object(w.a)(Object(w.a)({},e),{},{users:t.users});case"SET_CURRENT_PAGE":return Object(w.a)(Object(w.a)({},e),{},{currentPage:t.currentPage});case"SET_TOTAL_USERS_COUNT":return Object(w.a)(Object(w.a)({},e),{},{totalUsersCount:t.totalCount});case"TOGGLE_IS_FETCHING":return Object(w.a)(Object(w.a)({},e),{},{isFetching:t.isFetching});case"TOGGLE_IS_FOLLOWED":return Object(w.a)(Object(w.a)({},e),{},{following:t.isFetching?[].concat(Object(W.a)(e.following),[t.userId]):e.following.filter((function(e){return e!=t.userId}))});default:return e}},X=n(29),q=n.n(X),Q=n.p+"static/media/thumb-1920-288376.d05ae746.jpg",K=function(e){for(var t=Math.ceil(e.totalUsersCount/e.pageSize),n=[],s=1;s<=t;s++)n.push(s);return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:n.map((function(t){return Object(u.jsx)("span",{className:e.currentPage===t?q.a.selectPage:"",onClick:function(n){e.onPageChanged(t)},children:t})}))}),e.users.map((function(t){return Object(u.jsxs)("div",{children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:Object(u.jsx)(i.b,{to:"./profile/"+t.id,children:Object(u.jsx)("img",{src:null!=t.photos.small?t.photos.small:Q,className:q.a.photo})})}),Object(u.jsx)("div",{children:t.followed?Object(u.jsx)("button",{disabled:e.following.some((function(e){return e===t.id})),onClick:function(){e.unfollowThunkCreator(t.id)},children:"Unfollow"}):Object(u.jsx)("button",{disabled:e.following.some((function(e){return e===t.id})),onClick:function(){e.followThunkCreator(t.id)},children:"Follow"})})]}),Object(u.jsxs)("span",{children:[Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:t.name}),Object(u.jsx)("div",{children:t.status})]}),Object(u.jsxs)("span",{children:[Object(u.jsx)("div",{children:"u.location.country"}),Object(u.jsx)("div",{children:"u.location.city"})]})]})]},t.id)}))]})},V=n.p+"static/media/Ajux_loader.6281c6f4.gif",Z=function(){return Object(u.jsx)("img",{src:V})},$=function(e){Object(G.a)(n,e);var t=Object(R.a)(n);function n(){var e;Object(L.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).onPageChanged=function(t){e.props.setCurrentPage(t),e.props.getUsersThunkCreator(e.props.currentPage,e.props.pageSize)},e}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.getUsersThunkCreator(this.props.currentPage,this.props.pageSize)}},{key:"render",value:function(){return Object(u.jsxs)(u.Fragment,{children:[this.props.isFetching?Object(u.jsx)(Z,{}):null,Object(u.jsx)(K,{users:this.props.users,totalUsersCount:this.props.totalUsersCount,pageSize:this.props.pageSize,currentPage:this.props.currentPage,onPageChanged:this.onPageChanged,following:this.props.following,unfollowThunkCreator:this.props.unfollowThunkCreator,followThunkCreator:this.props.followThunkCreator})]})}}]),n}(c.a.Component),ee=Object(T.b)((function(e){return{users:e.usersPage.users,pageSize:e.usersPage.pageSize,totalUsersCount:e.usersPage.totalUsersCount,currentPage:e.usersPage.currentPage,isFetching:e.usersPage.isFetching,following:e.usersPage.following}}),(function(e){return{setCurrentPage:function(t){e(function(e){return{type:"SET_CURRENT_PAGE",currentPage:e}}(t))},getUsersThunkCreator:function(t,n){e(function(e,t){return function(n){n(J(!0)),E(e,t).then((function(e){n(J(!1)),n({type:"SET_USERS",users:e.items}),n({type:"SET_TOTAL_USERS_COUNT",totalCount:e.totalCount})}))}}(t,n))},unfollowThunkCreator:function(t){e(function(e){return function(t){t(H(!0,e)),y(e).then((function(n){0===n.resultCode&&t(function(e){return{type:"UNFOLLOW",userId:e}}(e)),t(H(!1,e))}))}}(t))},followThunkCreator:function(t){e(function(e){return function(t){t(H(!0,e)),k(e).then((function(n){0===n.resultCode&&t(function(e){return{type:"FOLLOW",userId:e}}(e)),t(H(!1,e))}))}}(t))}}}))($),te=n(30),ne=n.n(te),se=function(e){return e.profile?Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{className:ne.a.content,children:Object(u.jsx)("img",{src:"https://cdn.shazoo.ru/c800x360/258912_Jv7rCOP3Rs_kratos_3_wallpaper_1600x900.jpg"})}),Object(u.jsxs)("div",{className:ne.a.descriptionBlock,children:[Object(u.jsx)("img",{src:e.profile.photos.large}),Object(u.jsx)("div",{children:e.profile.aboutMe}),Object(u.jsx)("div",{children:e.profile.contacts.vk}),Object(u.jsx)("div",{children:e.profile.contacts.github}),Object(u.jsx)("div",{children:e.profile.contacts.facebook}),Object(u.jsx)("div",{children:e.profile.lookingForAJobDescription})]})]}):Object(u.jsx)(Z,{})},ae=n(31),ce=n.n(ae),ie=n(45),re=n.n(ie),oe=function(e){return Object(u.jsxs)("div",{className:re.a.item,children:[Object(u.jsx)("img",{src:"https://psn100.net/img/avatar/2e48ef2b3fde68e5e8b24e1c7c7ca1ca.png"}),Object(u.jsx)("div",{children:e.message}),Object(u.jsx)("div",{children:Object(u.jsxs)("span",{children:["like ",e.value]})})]})},ue=function(e){var t=e.postData.map((function(e){return Object(u.jsx)(oe,{message:e.message,value:e.value})}));return Object(u.jsxs)("div",{className:ce.a.description,children:[Object(u.jsx)("div",{children:"My posts"}),Object(u.jsx)("div",{children:Object(u.jsx)("textarea",{onChange:function(t){e.onPostChange(t.currentTarget.value)},value:e.newPostText})}),Object(u.jsx)("div",{children:Object(u.jsx)("button",{onClick:function(){e.addPost(e.newPostText)},children:"Add post"})}),Object(u.jsx)("div",{className:ce.a.posts,children:Object(u.jsx)("h3",{children:"New post"})}),t]})},le=Object(T.b)((function(e){return{postData:e.profilePage.postData,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(t){e(function(e){return{type:"ADD-POST",postText:e}}(t))},onPostChange:function(t){e({type:"UPDATE-NEW-POST-TEXT",newPostText:t})}}}))(ue),je=function(e){return Object(u.jsxs)("div",{children:[Object(u.jsx)(se,{profile:e.profile}),Object(u.jsx)(le,{})]})},de=function(e){Object(G.a)(n,e);var t=Object(R.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;e||(e="2"),this.props.getProfileThunkCreator(e)}},{key:"render",value:function(){return this.props.isAuth?Object(u.jsx)(je,Object(w.a)(Object(w.a)({},this.props),{},{profile:this.props.profile})):Object(u.jsx)(j.a,{to:"/login"})}}]),n}(c.a.Component),ge=Object(j.f)(de),be=Object(T.b)((function(e){return{profile:e.profilePage.profile,isAuth:e.auth.isAuth}}),(function(e){return{getProfileThunkCreator:function(t){e(function(e){return function(t){A(e).then((function(e){t({type:"SET_USERS_PROFILE",profile:e})}))}}(t))}}}))(ge),pe=n(32),he=n.n(pe),Oe=function(e){return Object(u.jsxs)("header",{className:he.a.header,children:[Object(u.jsx)("img",{src:"https://wallpaperforu.com/wp-content/uploads/2020/08/vector-wallpaper-200827150908131024x768.jpg",alt:"logo"}),Object(u.jsx)("div",{className:he.a.loginBlock,children:e.isAuth?e.login:Object(u.jsx)(i.b,{to:"/login",children:"Login"})})]})},fe={data:{id:null,email:null,login:null},isAuth:!1},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USERS_DATA":return Object(w.a)(Object(w.a)({},e),{},{data:Object(w.a)({},t.data),isAuth:!0});default:return e}},xe=function(e){Object(G.a)(n,e);var t=Object(R.a)(n);function n(){return Object(L.a)(this,n),t.apply(this,arguments)}return Object(B.a)(n,[{key:"componentDidMount",value:function(){this.props.getAutThunk()}},{key:"render",value:function(){return Object(u.jsx)(Oe,Object(w.a)(Object(w.a)({},this.props),{},{isAuth:this.props.isAuth,login:this.props.login}))}}]),n}(c.a.Component),ve=Object(T.b)((function(e){return{isAuth:e.auth.isAuth,login:e.auth.data.login}}),(function(e){return{getAutThunk:function(){e((function(e){N().then((function(t){0===t.resultCode&&e(function(e){return{type:"SET_USERS_DATA",data:e}}(t.data))}))}))}}}))(xe),_e=function(){return Object(u.jsx)("div",{children:"Login"})};var Pe=function(e){return Object(u.jsx)(i.a,{children:Object(u.jsxs)("div",{className:"app-wrapper",children:[Object(u.jsx)(ve,{}),Object(u.jsx)(l,{}),Object(u.jsxs)("div",{className:"app-wrapper-content",children:[Object(u.jsx)(j.b,{path:"/profile/:userId?",render:function(){return Object(u.jsx)(be,{})}}),Object(u.jsx)(j.b,{path:"/messages",render:function(){return Object(u.jsx)(F,{})}}),Object(u.jsx)(j.b,{path:"/users",render:function(){return Object(u.jsx)(ee,{})}}),Object(u.jsx)(j.b,{path:"/music",render:function(){return Object(u.jsx)(d,{})}}),Object(u.jsx)(j.b,{path:"/settings",render:function(){return Object(u.jsx)(g,{})}}),Object(u.jsx)(j.b,{path:"/news",render:function(){return Object(u.jsx)(b,{})}}),Object(u.jsx)(j.b,{path:"/login",render:function(){return Object(u.jsx)(_e,{})}})]})]})})},Te=n(21),we=n.n(Te),Ce=n(24),Se=n(46),Ee=Object(Ce.b)({profilePage:I,dialogsPage:U,usersPage:Y,auth:me}),Ne=Object(Ce.c)(Ee,Object(Ce.a)(Se.a));window.store=Ne;var ye=function(){we.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(i.a,{children:Object(u.jsx)(T.a,{store:Ne,children:Object(u.jsx)(Pe,{})})})}),document.getElementById("root"))};ye(),s()}},[[78,1,2]]]);
//# sourceMappingURL=main.33f64d9e.chunk.js.map